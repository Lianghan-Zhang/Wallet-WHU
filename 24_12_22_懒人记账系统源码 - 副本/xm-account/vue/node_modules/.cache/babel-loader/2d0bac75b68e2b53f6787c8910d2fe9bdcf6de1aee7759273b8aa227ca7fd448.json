{"ast":null,"code":"import \"core-js/modules/es.array.push.js\";\nimport * as echarts from 'echarts';\nconst pieOption = {\n  title: {\n    text: '账户支出分类统计',\n    subtext: '比例图',\n    left: 'center'\n  },\n  tooltip: {\n    trigger: 'item'\n  },\n  legend: {\n    orient: 'vertical',\n    left: 'left'\n  },\n  series: [{\n    type: 'pie',\n    center: ['50%', '60%'],\n    radius: '50%',\n    data: [],\n    label: {\n      show: true,\n      formatter(param) {\n        return param.name + ' (' + param.percent + '%)';\n      }\n    },\n    emphasis: {\n      itemStyle: {\n        shadowBlur: 10,\n        shadowOffsetX: 0,\n        shadowColor: 'rgba(0, 0, 0, 0.5)'\n      }\n    }\n  }]\n};\nconst pieOption1 = {\n  title: {\n    text: '账户收入分类统计',\n    subtext: '比例图',\n    left: 'center'\n  },\n  tooltip: {\n    trigger: 'item'\n  },\n  legend: {\n    orient: 'vertical',\n    left: 'left'\n  },\n  series: [{\n    type: 'pie',\n    center: ['50%', '60%'],\n    radius: '50%',\n    data: [],\n    label: {\n      show: true,\n      formatter(param) {\n        return param.name + ' (' + param.percent + '%)';\n      }\n    },\n    emphasis: {\n      itemStyle: {\n        shadowBlur: 10,\n        shadowOffsetX: 0,\n        shadowColor: 'rgba(0, 0, 0, 0.5)'\n      }\n    }\n  }]\n};\nexport default {\n  name: 'Home',\n  data() {\n    return {\n      user: JSON.parse(localStorage.getItem('xm-user') || '{}'),\n      notices: [],\n      ac: {},\n      payList: [],\n      incomeList: [],\n      colorList: ['#f56c6c', '#e6a23c', '#5cb87a', '#1989fa', '#6f7ad3']\n    };\n  },\n  created() {\n    this.$request.get('/notice/selectAll').then(res => {\n      this.notices = res.data || [];\n    });\n    this.$request.get('/ac/selectAll', {\n      params: {\n        userId: this.user.id\n      }\n    }).then(res => {\n      this.ac = res.data?.length ? res.data[0] : {};\n    });\n  },\n  mounted() {\n    if (this.user.role === 'USER') {\n      // 支出饼图\n      let pieDom = document.getElementById('pie');\n      let pieChart = echarts.init(pieDom);\n\n      // 收入饼图\n      let pieDom1 = document.getElementById('pie1');\n      let pieChart1 = echarts.init(pieDom1);\n      this.$request.get('/bill/count', {\n        params: {\n          type: '支出'\n        }\n      }).then(res => {\n        this.payList = res.data || [];\n        let arr = [];\n        this.payList.forEach(item => {\n          arr.push({\n            name: item.category,\n            value: item.money\n          });\n        });\n        pieOption.series[0].data = arr;\n        pieChart.setOption(pieOption);\n      });\n      this.$request.get('/bill/count', {\n        params: {\n          type: '收入'\n        }\n      }).then(res => {\n        this.incomeList = res.data || [];\n        let arr = [];\n        this.incomeList.forEach(item => {\n          arr.push({\n            name: item.category,\n            value: item.money\n          });\n        });\n        pieOption1.series[0].data = arr;\n        pieChart1.setOption(pieOption1);\n      });\n    }\n  }\n};","map":{"version":3,"names":["echarts","pieOption","title","text","subtext","left","tooltip","trigger","legend","orient","series","type","center","radius","data","label","show","formatter","param","name","percent","emphasis","itemStyle","shadowBlur","shadowOffsetX","shadowColor","pieOption1","user","JSON","parse","localStorage","getItem","notices","ac","payList","incomeList","colorList","created","$request","get","then","res","params","userId","id","length","mounted","role","pieDom","document","getElementById","pieChart","init","pieDom1","pieChart1","arr","forEach","item","push","category","value","money","setOption"],"sources":["src/views/manager/Home.vue"],"sourcesContent":["<template>\n  <div>\n    <div class=\"card\" style=\"padding: 15px; margin-bottom: 10px\">\n      您好，{{ user?.name }}！欢迎使用本系统\n      <el-button type=\"primary\" style=\"margin-left: 10px\" @click=\"$router.push('/bill')\">开始记账</el-button>\n    </div>\n\n    <div style=\"margin-bottom: 10px\" v-if=\"user.role === 'USER'\">\n      <el-row :gutter=\"10\">\n        <el-col :span=\"8\">\n          <el-card>\n            <div style=\"display: flex; align-items: center\">\n              <div style=\"width: 150px\">\n                <div style=\"font-size: 20px\">账户余额</div>\n              </div>\n              <div style=\"flex: 1\">\n                <div style=\"font-size: 16px; color: red; font-weight: bold\">￥ {{ ac.balance || 0 }}</div>\n              </div>\n            </div>\n          </el-card>\n        </el-col>\n        <el-col :span=\"8\">\n          <el-card>\n            <div style=\"display: flex; align-items: center\">\n              <div style=\"width: 150px\">\n                <div style=\"font-size: 20px\">账户支出</div>\n              </div>\n              <div style=\"flex: 1\">\n                <div style=\"font-size: 16px; color: green; font-weight: bold\">￥ {{ ac.pay || 0 }}</div>\n              </div>\n            </div>\n          </el-card>\n        </el-col>\n        <el-col :span=\"8\">\n          <el-card>\n            <div style=\"display: flex; align-items: center\">\n              <div style=\"width: 150px\">\n                <div style=\"font-size: 20px\">账户收入</div>\n              </div>\n              <div style=\"flex: 1\">\n                <div style=\"font-size: 16px; color: orange; font-weight: bold\">￥ {{ ac.income || 0 }}</div>\n              </div>\n            </div>\n          </el-card>\n        </el-col>\n      </el-row>\n    </div>\n\n    <div style=\"display: flex; grid-gap: 10px; margin-bottom: 10px\" v-if=\"user.role === 'USER'\">\n      <div style=\"width: 50%\" class=\"card\">\n        <div style=\"font-weight: bold; font-size: 24px; margin-bottom: 20px\">支出统计</div>\n        <div v-for=\"item in payList\" :key=\"item.id\" style=\"margin-bottom: 5px\">\n          {{ item.category }}  {{ item.money }}\n          <el-progress :stroke-width=\"12\" :percentage=\"item.percent\" :color=\"colorList\"></el-progress>\n        </div>\n      </div>\n\n      <div style=\"width: 50%\" class=\"card\">\n        <div style=\"font-weight: bold; font-size: 24px; margin-bottom: 20px\">收入统计</div>\n        <div v-for=\"item in incomeList\" :key=\"item.id\" style=\"margin-bottom: 5px\">\n          {{ item.category }}  {{ item.money }}\n          <el-progress :stroke-width=\"12\" :percentage=\"item.percent\" :color=\"colorList\"></el-progress>\n        </div>\n      </div>\n    </div>\n\n    <div style=\"display: flex; grid-gap: 10px; margin-bottom: 10px\" v-if=\"user.role === 'USER'\">\n      <div style=\"width: 50%\" class=\"card\">\n        <div id=\"pie\" style=\"width: 100%; height: 400px\"></div>\n      </div>\n      <div style=\"width: 50%\" class=\"card\">\n        <div id=\"pie1\" style=\"width: 100%; height: 400px\"></div>\n      </div>\n    </div>\n\n    <div style=\"display: flex; margin: 10px 0\">\n      <div style=\"width: 50%;\" class=\"card\">\n        <div style=\"margin-bottom: 30px; font-size: 20px; font-weight: bold\">公告列表</div>\n        <div >\n          <el-timeline  reverse slot=\"reference\">\n            <el-timeline-item v-for=\"item in notices\" :key=\"item.id\" :timestamp=\"item.time\">\n              <el-popover\n                  placement=\"right\"\n                  width=\"200\"\n                  trigger=\"hover\"\n                  :content=\"item.content\">\n                <span slot=\"reference\">{{ item.title }}</span>\n              </el-popover>\n            </el-timeline-item>\n          </el-timeline>\n        </div>\n      </div>\n    </div>\n  </div>\n</template>\n\n<script>\nimport * as echarts from 'echarts'\n\nconst pieOption = {\n  title: {\n    text: '账户支出分类统计',\n    subtext: '比例图',\n    left: 'center'\n  },\n  tooltip: {\n    trigger: 'item'\n  },\n  legend: {\n    orient: 'vertical',\n    left: 'left'\n  },\n  series: [\n    {\n      type: 'pie',\n      center: ['50%', '60%'],\n      radius: '50%',\n      data: [],\n      label: {\n        show: true,\n        formatter(param) {\n          return param.name + ' (' + param.percent + '%)';\n        }\n      },\n      emphasis: {\n        itemStyle: {\n          shadowBlur: 10,\n          shadowOffsetX: 0,\n          shadowColor: 'rgba(0, 0, 0, 0.5)'\n        }\n      }\n    }\n  ]\n}\n\nconst pieOption1 = {\n  title: {\n    text: '账户收入分类统计',\n    subtext: '比例图',\n    left: 'center'\n  },\n  tooltip: {\n    trigger: 'item'\n  },\n  legend: {\n    orient: 'vertical',\n    left: 'left'\n  },\n  series: [\n    {\n      type: 'pie',\n      center: ['50%', '60%'],\n      radius: '50%',\n      data: [],\n      label: {\n        show: true,\n        formatter(param) {\n          return param.name + ' (' + param.percent + '%)';\n        }\n      },\n      emphasis: {\n        itemStyle: {\n          shadowBlur: 10,\n          shadowOffsetX: 0,\n          shadowColor: 'rgba(0, 0, 0, 0.5)'\n        }\n      }\n    }\n  ]\n}\n\nexport default {\n  name: 'Home',\n  data() {\n    return {\n      user: JSON.parse(localStorage.getItem('xm-user') || '{}'),\n      notices: [],\n      ac: {},\n      payList: [],\n      incomeList: [],\n      colorList: ['#f56c6c', '#e6a23c', '#5cb87a', '#1989fa', '#6f7ad3']\n    }\n  },\n  created() {\n    this.$request.get('/notice/selectAll').then(res => {\n      this.notices = res.data || []\n    })\n\n    this.$request.get('/ac/selectAll', { params: { userId: this.user.id } }).then(res => {\n      this.ac = res.data?.length ? res.data[0] : {}\n    })\n  },\n  mounted() {\n    if (this.user.role === 'USER') {\n      // 支出饼图\n      let pieDom = document.getElementById('pie');\n      let pieChart = echarts.init(pieDom);\n\n      // 收入饼图\n      let pieDom1 = document.getElementById('pie1');\n      let pieChart1 = echarts.init(pieDom1);\n\n\n      this.$request.get('/bill/count', { params: {type: '支出'} }).then(res => {\n        this.payList = res.data || []\n        let arr = []\n        this.payList.forEach(item => {\n          arr.push({ name: item.category, value: item.money })\n        })\n        pieOption.series[0].data = arr\n        pieChart.setOption(pieOption)\n      })\n\n      this.$request.get('/bill/count', { params: {type: '收入'} }).then(res => {\n        this.incomeList = res.data || []\n\n        let arr = []\n        this.incomeList.forEach(item => {\n          arr.push({ name: item.category, value: item.money })\n        })\n        pieOption1.series[0].data = arr\n        pieChart1.setOption(pieOption1)\n      })\n    }\n  }\n}\n</script>\n"],"mappings":"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"},"metadata":{},"sourceType":"module","externalDependencies":[]}